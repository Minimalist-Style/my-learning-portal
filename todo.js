// =====================================================
// üéì –£–†–û–ö JAVASCRIPT: TO-DO LIST
// =====================================================
// 
// –í —ç—Ç–æ–º —Ñ–∞–π–ª–µ –º—ã –∏–∑—É—á–∏–º:
// 1. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (let, const)
// 2. –ú–∞—Å—Å–∏–≤—ã (—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∑–∞–¥–∞—á)
// 3. –§—É–Ω–∫—Ü–∏–∏ (–¥–µ–π—Å—Ç–≤–∏—è)
// 4. –°–æ–±—ã—Ç–∏—è (—Ä–µ–∞–∫—Ü–∏—è –Ω–∞ –∫–ª–∏–∫–∏)
// 5. –†–∞–±–æ—Ç–∞ —Å DOM (–∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã)
// =====================================================

// ===== –®–ê–ì 1: –ù–ê–•–û–î–ò–ú –≠–õ–ï–ú–ï–ù–¢–´ –ù–ê –°–¢–†–ê–ù–ò–¶–ï =====
// 
// document.getElementById('id') ‚Äî –Ω–∞—Ö–æ–¥–∏—Ç —ç–ª–µ–º–µ–Ω—Ç –ø–æ –µ–≥–æ id
// –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã (const) ‚Äî –æ–Ω–∏ –Ω–µ –±—É–¥—É—Ç –º–µ–Ω—è—Ç—å—Å—è

const todoForm = document.getElementById('todoForm');       // –§–æ—Ä–º–∞
const todoInput = document.getElementById('todoInput');     // –ü–æ–ª–µ –≤–≤–æ–¥–∞
const todoList = document.getElementById('todoList');       // –°–ø–∏—Å–æ–∫ <ul>
const totalCount = document.getElementById('totalCount');   // –°—á—ë—Ç—á–∏–∫ –≤—Å–µ–≥–æ
const doneCount = document.getElementById('doneCount');     // –°—á—ë—Ç—á–∏–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö
const emptyMessage = document.getElementById('emptyMessage'); // –°–æ–æ–±—â–µ–Ω–∏–µ "—Å–ø–∏—Å–æ–∫ –ø—É—Å—Ç"


// ===== –®–ê–ì 2: –ú–ê–°–°–ò–í –î–õ–Ø –•–†–ê–ù–ï–ù–ò–Ø –ó–ê–î–ê–ß =====
// 
// –ú–∞—Å—Å–∏–≤ ‚Äî —ç—Ç–æ —Å–ø–∏—Å–æ–∫ —ç–ª–µ–º–µ–Ω—Ç–æ–≤: [—ç–ª–µ–º–µ–Ω—Ç1, —ç–ª–µ–º–µ–Ω—Ç2, ...]
// let ‚Äî –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è, –∫–æ—Ç–æ—Ä–∞—è –º–æ–∂–µ—Ç –º–µ–Ω—è—Ç—å—Å—è

let todos = [];
// –ö–∞–∂–¥–∞—è –∑–∞–¥–∞—á–∞ –±—É–¥–µ—Ç –æ–±—ä–µ–∫—Ç–æ–º: { id: 1, text: "–ö—É–ø–∏—Ç—å –º–æ–ª–æ–∫–æ", done: false }


// ===== LOCALSTORAGE: –°–û–•–†–ê–ù–ï–ù–ò–ï –î–ê–ù–ù–´–• =====
//
// localStorage ‚Äî –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –±—Ä–∞—É–∑–µ—Ä–∞
// –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –¥–∞–∂–µ –ø–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–∏—è –±—Ä–∞—É–∑–µ—Ä–∞!
//
// –í–∞–∂–Ω–æ: localStorage —Ö—Ä–∞–Ω–∏—Ç —Ç–æ–ª—å–∫–æ –°–¢–†–û–ö–ò
// –ü–æ—ç—Ç–æ–º—É –º–∞—Å—Å–∏–≤ –Ω—É–∂–Ω–æ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å –≤ JSON –∏ –æ–±—Ä–∞—Ç–Ω–æ

// –ö–ª—é—á –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è (–∫–∞–∫ –∏–º—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ)
const STORAGE_KEY = 'my-todos';

// –§—É–Ω–∫—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á –≤ LocalStorage
function saveTodos() {
    // JSON.stringify ‚Äî –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç –æ–±—ä–µ–∫—Ç/–º–∞—Å—Å–∏–≤ –≤ —Å—Ç—Ä–æ–∫—É
    const todosString = JSON.stringify(todos);
    localStorage.setItem(STORAGE_KEY, todosString);
    console.log('üíæ –ó–∞–¥–∞—á–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ LocalStorage');
}

// –§—É–Ω–∫—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –∑–∞–¥–∞—á –∏–∑ LocalStorage
function loadTodos() {
    const todosString = localStorage.getItem(STORAGE_KEY);

    // –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –µ—Å—Ç—å ‚Äî –ø–∞—Ä—Å–∏–º –∏—Ö
    if (todosString) {
        // JSON.parse ‚Äî –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç —Å—Ç—Ä–æ–∫—É –æ–±—Ä–∞—Ç–Ω–æ –≤ –æ–±—ä–µ–∫—Ç/–º–∞—Å—Å–∏–≤
        todos = JSON.parse(todosString);
        console.log('üìÇ –ó–∞–¥–∞—á–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã –∏–∑ LocalStorage:', todos);
    }
}


// ===== –®–ê–ì 3: –§–£–ù–ö–¶–ò–Ø –û–¢–†–ò–°–û–í–ö–ò –°–ü–ò–°–ö–ê =====
// 
// –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –±–µ—Ä—ë—Ç –º–∞—Å—Å–∏–≤ todos –∏ —Å–æ–∑–¥–∞—ë—Ç HTML –¥–ª—è –∫–∞–∂–¥–æ–π –∑–∞–¥–∞—á–∏
// –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –∫–∞–∂–¥—ã–π —Ä–∞–∑ –∫–æ–≥–¥–∞ —Å–ø–∏—Å–æ–∫ –º–µ–Ω—è–µ—Ç—Å—è

function renderTodos() {
    // –û—á–∏—â–∞–µ–º —Å–ø–∏—Å–æ–∫
    todoList.innerHTML = '';

    // –ü—Ä–æ—Ö–æ–¥–∏–º –ø–æ –∫–∞–∂–¥–æ–π –∑–∞–¥–∞—á–µ –≤ –º–∞—Å—Å–∏–≤–µ
    // forEach ‚Äî –¥–µ–ª–∞–µ—Ç —á—Ç–æ-—Ç–æ –¥–ª—è –ö–ê–ñ–î–û–ì–û —ç–ª–µ–º–µ–Ω—Ç–∞ –º–∞—Å—Å–∏–≤–∞
    todos.forEach(function (todo) {
        // –°–æ–∑–¥–∞—ë–º —ç–ª–µ–º–µ–Ω—Ç <li>
        const li = document.createElement('li');
        li.className = 'todo-item';

        // –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π HTML —ç–ª–µ–º–µ–Ω—Ç–∞
        // –û–±—Ä–∞—Ç–∏ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ onclick="..." ‚Äî —ç—Ç–æ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
        li.innerHTML = `
            <div class="todo-checkbox ${todo.done ? 'checked' : ''}" 
                 onclick="toggleTodo(${todo.id})">
            </div>
            <span class="todo-text ${todo.done ? 'completed' : ''}">
                ${todo.text}
            </span>
            <button class="todo-delete" onclick="deleteTodo(${todo.id})">
                √ó
            </button>
        `;

        // –î–æ–±–∞–≤–ª—è–µ–º <li> –≤ —Å–ø–∏—Å–æ–∫ <ul>
        todoList.appendChild(li);
    });

    // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á—ë—Ç—á–∏–∫–∏ –∏ —Å–æ–æ–±—â–µ–Ω–∏–µ
    updateStats();
}


// ===== –®–ê–ì 4: –§–£–ù–ö–¶–ò–Ø –î–û–ë–ê–í–õ–ï–ù–ò–Ø –ó–ê–î–ê–ß–ò =====

function addTodo(text) {
    // –°–æ–∑–¥–∞—ë–º –æ–±—ä–µ–∫—Ç –∑–∞–¥–∞—á–∏
    const newTodo = {
        id: Date.now(),  // –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID (—Ç–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö)
        text: text,      // –¢–µ–∫—Å—Ç –∑–∞–¥–∞—á–∏
        done: false      // –í—ã–ø–æ–ª–Ω–µ–Ω–∞? –ù–µ—Ç
    };

    // –î–æ–±–∞–≤–ª—è–µ–º –≤ –º–∞—Å—Å–∏–≤
    // push() ‚Äî –¥–æ–±–∞–≤–ª—è–µ—Ç —ç–ª–µ–º–µ–Ω—Ç –≤ –∫–æ–Ω–µ—Ü –º–∞—Å—Å–∏–≤–∞
    todos.push(newTodo);

    // –°–û–•–†–ê–ù–Ø–ï–ú –í LOCALSTORAGE
    saveTodos();

    // –ü–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞–µ–º —Å–ø–∏—Å–æ–∫
    renderTodos();

    // –í—ã–≤–æ–¥–∏–º –≤ –∫–æ–Ω—Å–æ–ª—å –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
    console.log('–î–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞–¥–∞—á–∞:', newTodo);
    console.log('–í—Å–µ –∑–∞–¥–∞—á–∏:', todos);
}


// ===== –®–ê–ì 5: –§–£–ù–ö–¶–ò–Ø –ü–ï–†–ï–ö–õ–Æ–ß–ï–ù–ò–Ø –°–¢–ê–¢–£–°–ê =====

function toggleTodo(id) {
    // –ù–∞—Ö–æ–¥–∏–º –∑–∞–¥–∞—á—É –ø–æ id
    // find() ‚Äî –∏—â–µ—Ç —ç–ª–µ–º–µ–Ω—Ç –≤ –º–∞—Å—Å–∏–≤–µ –ø–æ —É—Å–ª–æ–≤–∏—é
    const todo = todos.find(function (t) {
        return t.id === id;
    });

    // –ï—Å–ª–∏ –Ω–∞—à–ª–∏ ‚Äî –ø–µ—Ä–µ–∫–ª—é—á–∞–µ–º —Å—Ç–∞—Ç—É—Å
    if (todo) {
        todo.done = !todo.done;  // ! ‚Äî –æ–ø–µ—Ä–∞—Ç–æ—Ä –ù–ï (–ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç true –≤ false –∏ –Ω–∞–æ–±–æ—Ä–æ—Ç)

        // –°–û–•–†–ê–ù–Ø–ï–ú –í LOCALSTORAGE
        saveTodos();

        renderTodos();
        console.log('–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∞ –∑–∞–¥–∞—á–∞:', todo);
    }
}


// ===== –®–ê–ì 6: –§–£–ù–ö–¶–ò–Ø –£–î–ê–õ–ï–ù–ò–Ø –ó–ê–î–ê–ß–ò =====

function deleteTodo(id) {
    // filter() ‚Äî —Å–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—ã–π –º–∞—Å—Å–∏–≤, –æ—Å—Ç–∞–≤–ª—è—è —Ç–æ–ª—å–∫–æ —ç–ª–µ–º–µ–Ω—Ç—ã, 
    // –¥–ª—è –∫–æ—Ç–æ—Ä—ã—Ö —Ñ—É–Ω–∫—Ü–∏—è –≤–µ—Ä–Ω—É–ª–∞ true
    todos = todos.filter(function (t) {
        return t.id !== id;  // –û—Å—Ç–∞–≤–ª—è–µ–º –≤—Å–µ, –∫—Ä–æ–º–µ —É–¥–∞–ª—è–µ–º–æ–π
    });

    // –°–û–•–†–ê–ù–Ø–ï–ú –í LOCALSTORAGE
    saveTodos();

    renderTodos();
    console.log('–£–¥–∞–ª–µ–Ω–∞ –∑–∞–¥–∞—á–∞ —Å id:', id);
}


// ===== –®–ê–ì 7: –§–£–ù–ö–¶–ò–Ø –û–ë–ù–û–í–õ–ï–ù–ò–Ø –°–¢–ê–¢–ò–°–¢–ò–ö–ò =====

function updateStats() {
    // –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
    totalCount.textContent = todos.length;

    // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö
    // filter() + length ‚Äî —Å—á–∏—Ç–∞–µ–º —Å–∫–æ–ª—å–∫–æ done === true
    const completed = todos.filter(function (t) {
        return t.done === true;
    });
    doneCount.textContent = completed.length;

    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º/—Å–∫—Ä—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –ø—É—Å—Ç–æ–º —Å–ø–∏—Å–∫–µ
    if (todos.length === 0) {
        emptyMessage.classList.remove('hidden');
    } else {
        emptyMessage.classList.add('hidden');
    }
}


// ===== –®–ê–ì 8: –û–ë–†–ê–ë–û–¢–ß–ò–ö –û–¢–ü–†–ê–í–ö–ò –§–û–†–ú–´ =====
// 
// addEventListener ‚Äî "—Å–ª—É—à–∞–µ—Ç" —Å–æ–±—ã—Ç–∏—è
// 'submit' ‚Äî —Å–æ–±—ã—Ç–∏–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã (–Ω–∞–∂–∞—Ç–∏–µ Enter –∏–ª–∏ –∫–Ω–æ–ø–∫–∏)

todoForm.addEventListener('submit', function (event) {
    // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    // (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Ñ–æ—Ä–º–∞ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É)
    event.preventDefault();

    // –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—Å—Ç –∏–∑ –ø–æ–ª—è –≤–≤–æ–¥–∞
    // .value ‚Äî –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ–ª—è
    // .trim() ‚Äî —É–±–∏—Ä–∞–µ—Ç –ø—Ä–æ–±–µ–ª—ã –ø–æ –∫—Ä–∞—è–º
    const text = todoInput.value.trim();

    // –ï—Å–ª–∏ —Ç–µ–∫—Å—Ç –Ω–µ –ø—É—Å—Ç–æ–π ‚Äî –¥–æ–±–∞–≤–ª—è–µ–º –∑–∞–¥–∞—á—É
    if (text !== '') {
        addTodo(text);
        todoInput.value = '';  // –û—á–∏—â–∞–µ–º –ø–æ–ª–µ –≤–≤–æ–¥–∞
        todoInput.focus();     // –°—Ç–∞–≤–∏–º –∫—É—Ä—Å–æ—Ä –æ–±—Ä–∞—Ç–Ω–æ –≤ –ø–æ–ª–µ
    }
});


// ===== –®–ê–ì 9: –ó–ê–ì–†–£–ó–ö–ê –ò –ù–ê–ß–ê–õ–¨–ù–ê–Ø –û–¢–†–ò–°–û–í–ö–ê =====

// –°–Ω–∞—á–∞–ª–∞ –∑–∞–≥—Ä—É–∂–∞–µ–º –∑–∞–¥–∞—á–∏ –∏–∑ LocalStorage
loadTodos();

// –ó–∞—Ç–µ–º –æ—Ç—Ä–∏—Å–æ–≤—ã–≤–∞–µ–º –∏—Ö
renderTodos();

console.log('‚úÖ To-Do –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ —Å LocalStorage!');


// =====================================================
// üéì –®–ü–ê–†–ì–ê–õ–ö–ê –ü–û JAVASCRIPT:
// =====================================================
//
// –ü–ï–†–ï–ú–ï–ù–ù–´–ï:
//   let name = '–∑–Ω–∞—á–µ–Ω–∏–µ';    // –ú–æ–∂–Ω–æ –º–µ–Ω—è—Ç—å
//   const name = '–∑–Ω–∞—á–µ–Ω–∏–µ';  // –ù–µ–ª—å–∑—è –º–µ–Ω—è—Ç—å
//
// –ú–ê–°–°–ò–í–´:
//   let arr = [1, 2, 3];      // –°–æ–∑–¥–∞–Ω–∏–µ
//   arr.push(4);              // –î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ–Ω–µ—Ü
//   arr.length;               // –î–ª–∏–Ω–∞ –º–∞—Å—Å–∏–≤–∞
//   arr.forEach(fn);          // –î–ª—è –∫–∞–∂–¥–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞
//   arr.filter(fn);           // –û—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å
//   arr.find(fn);             // –ù–∞–π—Ç–∏ –æ–¥–∏–Ω —ç–ª–µ–º–µ–Ω—Ç
//
// –§–£–ù–ö–¶–ò–ò:
//   function name(arg) { ... }           // –û–±—ã—á–Ω–∞—è
//   const name = function(arg) { ... }   // –ö–∞–∫ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è
//
// DOM:
//   document.getElementById('id')        // –ù–∞–π—Ç–∏ –ø–æ id
//   document.createElement('tag')        // –°–æ–∑–¥–∞—Ç—å —ç–ª–µ–º–µ–Ω—Ç
//   element.innerHTML = '...'            // –ò–∑–º–µ–Ω–∏—Ç—å HTML –≤–Ω—É—Ç—Ä–∏
//   element.textContent = '...'          // –ò–∑–º–µ–Ω–∏—Ç—å —Ç–µ–∫—Å—Ç
//   element.appendChild(child)           // –î–æ–±–∞–≤–∏—Ç—å –¥–æ—á–µ—Ä–Ω–∏–π —ç–ª–µ–º–µ–Ω—Ç
//   element.classList.add('class')       // –î–æ–±–∞–≤–∏—Ç—å –∫–ª–∞—Å—Å
//   element.classList.remove('class')    // –£–±—Ä–∞—Ç—å –∫–ª–∞—Å—Å
//
// –°–û–ë–´–¢–ò–Ø:
//   element.addEventListener('click', function() { ... })
//   event.preventDefault()               // –û—Ç–º–µ–Ω–∏—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ
//
// LOCALSTORAGE:
//   localStorage.setItem('key', 'value')   // –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
//   localStorage.getItem('key')            // –ü–æ–ª—É—á–∏—Ç—å
//   localStorage.removeItem('key')         // –£–¥–∞–ª–∏—Ç—å
//   localStorage.clear()                   // –û—á–∏—Å—Ç–∏—Ç—å –≤—Å—ë
//   JSON.stringify(obj)                    // –û–±—ä–µ–∫—Ç ‚Üí —Å—Ç—Ä–æ–∫–∞
//   JSON.parse(str)                        // –°—Ç—Ä–æ–∫–∞ ‚Üí –æ–±—ä–µ–∫—Ç
//
// =====================================================
